/*****************************************************************************
 jQuery flickGal 1.1
 
 Copyright (c) 2011 Soichi Takamura (http://stakamura.me/jquery/flickgal/demo.html)
 
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html
 
 **************************************************************************** */

(function(b){b.fn.flickGal=function(m){var i,w,x,E;function o(b){return[y,b,z].join("")}var m=b.extend({infinitCarousel:!1,lockScroll:!0},m),c=navigator.userAgent.toLowerCase(),d=c.indexOf("webkit")>=0?0:c.indexOf("gecko")>=0?1:c.indexOf("msie")>=0?2:c.indexOf("opera")>=0?3:4,h=!!(c.indexOf("iphone")>=0||c.indexOf("ipad")>=0||c.indexOf("android")>=0),e;switch(d){case 0:e="-webkit-";break;case 1:e="-moz-";break;case 2:e="-ms-";break;case 3:e="-o-";break;case 4:e=""}var p=e+"transform",y=d==0?"translate3d(":
"translate(",z=d==0?"px,0,0)":"px,0)";i=h?"touchstart":"mousedown";w=h?"touchend":"mouseup";x=h?"touchmove":"mousemove";E=d==0?"webkitTransitionEnd":d==3?"oTransitionEnd":"transitionend";return this.each(function(){function c(){j=(q.innerWidth()-n)/2;d(a)}function e(a){var b=h?a.touches[0]:a;switch(a.type){case x:m.lockScroll&&a.preventDefault();A&&f.css(p,o(r+(j+b.pageX-B)));break;case i:h||a.preventDefault();A=!0;F=(new Date).getTime();B=h?b.pageX:a.clientX;r=C()-z-j;f.hasClass("moving")&&f.removeClass("moving").css(p,
o(j+r));break;case w:r=0,A=!1,G=h?a.changedTouches[0].pageX:a.clientX,d()}}function d(b){f.addClass("moving");var c=C();typeof b=="number"?a=b:(b=G-B,(new Date).getTime()-F<300&&Math.abs(b)>30?b>0?a--:a++:a=Math.floor(Math.abs(y+c-j-n/2)/n));a>k-1?a=k-1:a<0&&(a=0);f.css(p,o(j+n*a*-1));H&&D.removeClass("selected").eq(a).addClass("selected");I&&J()}function C(){return f.offset().left}var s=b(this),q=b(".container",s).css({overflow:"hidden"}),f=b(".containerInner",q).css({position:"relative",overflow:"hidden",
top:0,left:0}),l=b(".item",f).css({"float":"left"}),k=l.length,n=l.outerWidth(!0),g=n*k,l=l.outerHeight(!0),y=0,a=0,z=q.offset().left,j=0;q.height(l).scroll(function(){b(this).scrollLeft(0)});f.height(l).width(g).css(p,o(C()));window.addEventListener("orientationchange",c,!1);c();var g=b(".nav",s),t=g.find("a[href^=#]"),D=t.parent(),H=!(!g.length||!t.length||!D.length);H&&(D.eq(0).addClass("selected"),t.bind(i,function(){var a=t.index(this);d(a);return!1}).bind("click",function(){return!1}));g=f[0];
g.addEventListener(x,e,!1);g.addEventListener(i,e,!1);g.addEventListener(w,e,!1);g.addEventListener(E,function(){f.removeClass("moving")},!1);var u=b(".prev",s),v=b(".next",s),I=!(!u.length||!v.length);if(I){var J=function(){u.add(v).removeClass("off");a===0?u.addClass("off"):a===k-1&&v.addClass("off")};u.bind(i,function(){a=a>0?a-1:m.infinitCarousel?k-1:a;d(a)});v.bind(i,function(){a=a<k-1?a+1:m.infinitCarousel?0:a;d(a)});J()}var B=0,G=0,F=0,r=0,A=!1})}})(window.jQuery);