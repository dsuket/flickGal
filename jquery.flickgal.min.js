/*****************************************************************************
 jQuery flickGal 1.1.6
 
 Copyright (c) 2011 Soichi Takamura (http://stakam.net/jquery/flickgal/demo.html)
 
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html
 
 **************************************************************************** */

(function(b,A){b.fn.flickGal=function(n){var j,B,C,D,r;function s(b){return[E,b,Q].join("")}var n=b.extend({infinitCarousel:false,lockScroll:true},n),e=navigator.userAgent.toLowerCase();r=1;var k=e.indexOf("webkit")>=0?0:e.indexOf("gecko")>=0?r:e.indexOf("msie")>=0?2:e.indexOf("opera")>=0?3:4,f=!!(e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("android")>=0),g;switch(k){case 0:g="-webkit-";break;case r:g="-moz-";break;case 2:g="-ms-";break;case 3:g="-o-";break;case 4:g=""}var o=g+"transform",
E=k==0?"translate3d(":"translate(",Q=k==0?"px,0,0)":"px,0)";j=f?"touchstart":"mousedown";B=f?"touchend":"mouseup";C=f?"touchmove":"mousemove";D=k==0?"webkitTransitionEnd":k==3?"oTransitionEnd":"transitionend";return this.each(function(){function e(){t=u.offset().left;h=(u.innerWidth()-p)/2;q(a)}function g(c){var a=f?c.touches[0]:c;switch(c.type){case C:n.lockScroll&&c.preventDefault();F&&d.css(o,s(v+(h+a.pageX-G)));break;case j:f||c.preventDefault();F=true;J=(new Date).getTime();G=f?a.pageX:c.clientX;
v=H()-t-h;d.hasClass("moving")&&d.removeClass("moving").css(o,s(h+v));break;case B:v=0,F=false,K=f?c.changedTouches[0].pageX:c.clientX,q()}}function L(){d.removeClass("moving")}function q(c){d.addClass("moving");if(typeof c=="number")a=c;else{var c=(new Date).getTime()-J,b=K-G;c<300&&Math.abs(b)>30?b>0?a--:a++:(c=H()-t,console.log(h,c),c=Math.abs(E+c-h-p/2),a=Math.floor(c/p))}a>l-1?a=l-1:a<0&&(a=0);d.css(o,s(h+p*a*-1));M&&I.removeClass("selected").eq(a).addClass("selected");N&&O()}function H(){var a;
if(k!=r)a=d.offset().left;else a:{try{var b=A.parseInt(/(,.+?){3} (.+?)px/.exec(d.css(o))[2]);a=!A.isNaN(b)?b+t:0;break a}catch(e){}a=0}return a}var w=b(this),u=b(".container",w).css({overflow:"hidden"}),d=b(".containerInner",u).css({position:"relative",overflow:"hidden",top:0,left:0}),m=b(".item",d).css({"float":"left"}),l=m.length,p=m.outerWidth(true),i=p*l,m=m.outerHeight(true),E=0,a=0,t=0,h=0;u.height(m).scroll(function(){b(this).scrollLeft(0)});d.height(m).width(i).css(o,s(H()));b(A).bind(f?
"orientationchange":"resize",e);e();var i=b(".nav",w),x=i.find("a[href^=#]"),I=x.parent(),M=!(!i.length||!x.length||!I.length);M&&(I.eq(0).addClass("selected"),x.bind(j,function(){var a=x.index(this);q(a);return false}).bind("click",function(){return false}));i=[C,j,B];if(f){var P=d[0];b.each(i,function(a,b){P.addEventListener(b,g,false)});P.addEventListener(D,L,false)}else d.bind(i.join(" "),g).bind(D,L);var y=b(".prev",w),z=b(".next",w),N=!(!y.length||!z.length);if(N){var O=function(){y.add(z).removeClass("off");
a===0?y.addClass("off"):a===l-1&&z.addClass("off")};y.bind(j,function(){a=a>0?a-1:n.infinitCarousel?l-1:a;q(a)});z.bind(j,function(){a=a<l-1?a+1:n.infinitCarousel?0:a;q(a)});O()}var G=0,K=0,J=0,v=0,F=false})}})(window.jQuery,this);
