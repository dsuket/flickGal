/*****************************************************************************
 jQuery flickGal 1.0.1
 
 Copyright (c) 2011 Soichi Takamura (http://stakamura.me/jquery/flickgal/demo.html)
 
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html
 
 **************************************************************************** */

(function(a){a.fn.flickGal=function(b){var b=a.extend({infinitCarousel:false,lockScroll:true},b);return this.each(function(){var k=$(this),j=$(".container",k).css({overflow:"hidden"}),d=$(".containerInner",j).css({position:"relative",overflow:"hidden",top:0,left:0}),u=$(".item",d).css({"float":"left"}),f=u.length,g=u.outerWidth(true),K=g*f,B=u.outerHeight(true),L=0,M=(g*f-g)*-1,c=0,a=0,G=j.offset().left,h=0;j.height(B).scroll(function(){$(this).scrollLeft(0)});d.height(B).width(K).css({"-webkit-transform":"translate3d("+r()+"px,0,0)"});var e=[{s:"mousedown",e:"mouseup",m:"mousemove"},{s:"touchstart",e:"touchend",m:"touchmove"}],D=navigator.userAgent.toLowerCase();if(D.search(/iphone/)>=0||D.search(/ipad/)>=0)c=1;function y(){h=(j.innerWidth()-g)/2;i(a)}window.addEventListener("orientationchange",y,false);y();var E=$(".nav",k),m=E.find("a[href^=#]"),q=m.parent(),A=E.length&&m.length&&q.length?true:false;if(A){q.eq(0).addClass("selected");m.bind(e[c].s,function(){var a=m.index(this);i(a);return false}).bind("click",function(){return false})}var p=d[0];p.addEventListener(e[c].m,s,false);p.addEventListener(e[c].s,s,false);p.addEventListener(e[c].e,s,false);p.addEventListener("webkitTransitionEnd",J,false);var o=$(".prev",k),n=$(".next",k),z=o.length&&n.length?true:false;if(z){function I(){a=a>0?a-1:b.infinitCarousel?f-1:a;i(a)}function H(){a=a<f-1?a+1:b.infinitCarousel?0:a;i(a)}function w(){o.add(n).removeClass("off");if(a===0)o.addClass("off");else a===f-1&&n.addClass("off")}o.bind(e[c].s,I);n.bind(e[c].s,H);w()}var v=0,F=0,C=0,l=0,t=0,x=0;function s(a){var f=c?a.touches[0]:a;if(a.type===e[c].m){x===0&&b.lockScroll&&a.preventDefault();if(t){var g=h+f.pageX-v;d.css({"-webkit-transform":["translate3d(",l+g,"px,0,0)"].join("")})}}else if(a.type===e[c].s){t=1;C=+new Date;v=c?f.pageX:a.clientX;l=r()-G-h;d.hasClass("moving")&&d.removeClass("moving").css({"-webkit-transform":["translate3d(",h+l,"px,0,0)"].join("")})}else if(a.type===e[c].e){l=t=x=0;F=c?a.changedTouches[0].pageX:a.clientX;i()}}function J(){d.removeClass("moving")}function i(c){d.addClass("moving");var k=r();if(typeof c=="number")a=c;else{var i=+new Date,e=i-C,b=F-v;if(e<300&&Math.abs(b)>30)if(b>0)a--;else a++;else{var j=Math.abs(L+k-h-g/2);a=Math.floor(j/g)}}if(a>f-1)a=f-1;else if(a<0)a=0;d.css({"-webkit-transform":["translate3d(",h+g*a*-1,"px,0,0)"].join("")});A&&q.removeClass("selected").eq(a).addClass("selected");z&&w()}function r(){return d.offset().left}})}})(jQuery)